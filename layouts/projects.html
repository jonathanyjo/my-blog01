{{ define "main" }}
<div class="w-full md:w-3/4 lg:w-1/2 mx-auto px-4 py-12">
  <h1 class="text-3xl md:text-5xl font-bold mb-8 md:mb-12 text-text-primary-light dark:text-text-primary-dark">
    {{ .Title }}
  </h1>

  <div class="grid grid-cols-1 gap-6 md:gap-8 max-w-3xl mx-auto">
    {{ $projectsData := index site.Data .Language.Lang "projects" }}
    {{ range $projectsData.projects }}
    <div class="project-card relative overflow-hidden rounded-lg bg-bg-primary-light dark:bg-bg-secondary-dark border border-border-primary-light dark:border-border-primary-dark transition-all duration-300 group">
      
      <!-- 이미지 배경 -->
      <div class="aspect-w-16 aspect-h-9 overflow-hidden relative">
        <div class="absolute inset-0 bg-gradient-to-br from-accent-light/20 to-accent-light/20 dark:from-accent-dark/20 dark:to-accent-dark/20 z-10"></div>

        {{ if .image }}
        <img src="{{ .image }}" alt="{{ .title }}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
        {{ end }}

        <!-- 그라데이션 오버레이 -->
        <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-60 z-20"></div>
      </div>

      <!-- 콘텐츠 영역 (z-30) -->
      <div class="absolute inset-0 z-30 p-4 pb-20 md:p-6 md:pb-24 flex flex-col justify-end transform transition-transform duration-500 translate-y-20 group-hover:translate-y-[30px]">
        <h3 class="text-xl md:text-2xl font-bold mb-1.5 md:mb-2 text-white line-clamp-2">{{ .title }}</h3>

        {{ with .tech }}
        <div class="flex flex-wrap gap-1 md:gap-2 mb-1.5 md:mb-3">
          {{ $techs := split . "," }}
          {{ range $tech := $techs }}
          <span class="px-1.5 md:px-2 py-0.5 bg-neutral-700/30 backdrop-blur-sm rounded-md text-[10px] md:text-xs font-medium text-white">
            {{ $tech }}
          </span>
          {{ end }}
        </div>
        {{ end }}

        <p class="hidden md:block text-sm text-white mb-3 line-clamp-3 md:line-clamp-4">{{ .description }}</p>
      </div>

      <!-- 호버시만 나타나는 버튼 영역 (z-40, 형제 요소로 이동) -->
      <div class="absolute bottom-4 left-4 right-4 opacity-0 group-hover:opacity-100 transition-all duration-300 ease-in-out transform translate-y-2 group-hover:translate-y-0 flex flex-wrap gap-2 z-40 pointer-events-none group-hover:pointer-events-auto">
        
        <!-- View Code 버튼 -->
        {{ with .view_code }}
        <a href="{{ . }}" target="_blank" rel="noreferrer"
           class="inline-flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg border border-neutral-500/70 hover:border-neutral-400 hover:bg-neutral-900/60 text-white/90 backdrop-blur-sm transition-all duration-200 hover:shadow-lg pointer-events-auto flex-shrink-0 bg-black/80">
          <svg class="w-3.5 h-3.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path>
          </svg>
          View Code
        </a>
        {{ end }}

        <!-- Watch Demo 버튼 -->
        {{ with .watch_demo }}
        {{ if ne . "" }}
        <a href="{{ . }}" target="_blank" rel="noreferrer"
           class="inline-flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg border border-red-500/70 hover:border-red-400 hover:bg-red-500/20 text-red-300 backdrop-blur-sm transition-all duration-200 hover:shadow-lg pointer-events-auto flex-shrink-0 bg-black/80">
          <svg class="w-3.5 h-3.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path>
          </svg>
          Watch Demo
        </a>
        {{ end }}
        {{ end }}

        <!-- Visit Website 버튼 -->
        {{ with .visit_website }}
        <a href="{{ . }}" target="_blank" rel="noreferrer"
           class="inline-flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg bg-gradient-to-r from-blue-500/90 to-purple-500/90 hover:from-blue-600 hover:to-purple-600 text-white shadow-lg hover:shadow-xl backdrop-blur-sm transition-all duration-200 transform hover:-translate-y-0.5 pointer-events-auto flex-shrink-0">
          <svg class="w-3.5 h-3.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
          </svg>
          Visit Website
        </a>
        {{ end }}
      </div>

    </div>
    {{ end }}
  </div>
</div>

<!-- 기존 CSS는 그대로 유지 -->
<style>
.project-card {
    height: 100%;
    display: flex;
    flex-direction: column;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

.project-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2), 0 10px 10px -5px rgba(0, 0, 0, 0.1);
}

.aspect-w-16 {
    position: relative;
    padding-bottom: 56.25%;
}

.aspect-w-16 > img {
    position: absolute;
    height: 100%;
    width: 100%;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    object-fit: cover;
    filter: saturate(1.1) contrast(1.1);
}
</style>
{{ end }}
